SENTExample
Das Beispielprojekt "SENTExample.cfg" zeigt die Verwendung der Option .Sensor und des Moduls VT2710. Auf Kanal 1 wird eine SENT ECU, auf Kanal 2 ein SENT Sensor simuliert. Zwischen Sensor und ECU wird das Signal "RollingCounter" mit dem SENT Protokoll übertragen. Der Wert dieses Signals wird bei jeder Übertragung um eins von 0 bis 255 erhöht und beginnt dann wieder bei 0. Das Beispiel ermöglicht es, die Anwendung des VT2710 Moduls zu testen und den Datenaustausch über das SENT Proktoll zu erkunden. Die Änderung des Signalwertes erfolgt über ein CAPL-Programm. Anhand des CAPL Programms kann die Änderung der Sensorwerte über CAPL-Kommandos nachvollzogen werden.

Einrichten der Hardware
In der Beschreibung "Einrichten der Hardware" des VT-Systems ist beschrieben, wie ein VT-Rack in Betrieb genommen wird. 
Im SENTRollingCounterExample werden die Daten mittels des SENT Protokolls zwischen Kanal 1 und Kanal 2 übertragen. Dazu müssen die Signalleitungen verbunden sein, damit die Daten übertragen werden können. Dazu muss der Pin 7 Sensor+1 des PSI5SENTpiggy Connector 1 mit dem Pin 9 ECU+2 des PSI5SENTpiggy Connector 2 und der Pin 6 Sensor-1 des PSI5SENTpiggy Connector 1 mit dem Pin 8 ECU-2 des PSI5SENTpiggy Connector 2 verbunden sein. Des weiteren muss der Pin 10 SENT VDD1 des PSI5SENTpiggy Connector 1 mit dem Pin 10 SENT VDD2 des PSI5SENTpiggy Connector 2 verbunden sein.

Ausführung des Beispiels
Bei der Ausführung des Beispiels werden die sich ändernden Werte im Fenster "Grafik" in der Form eines Sägezahnes angezeigt. Die Daten SENSORSIM::Sensor::Signals::RollingCounter werden vom simulierten Sensor gesendet und die Daten ECUSIM::Sensor:Signals::RollingCounter werden von der simulierten ECU empfangen. Im Fenster "Daten" werden die Daten als aktueller Zahlenwert angezeigt. Im Fenster "Trace" wird das SENT Protokoll dargestellt und aufgezeichnet. Nach dem Stoppen der Programmausführung kann das SENT Protokoll im Fenster "Trace" analysiert werden. Im Fenster "Write" werden einige Informationen zur Ausführung des Programms ausgegeben. Wenn beim Starten des Beispiels Fehler auftreten, so werden sie in diesem Fenster angezeigt.

Bedeutung der LEDs am VT2710 Modul
Bei der Ausführung des  Beispiels sind am VT2710 Modul folgenden LED's aktiviert:
PSI5/SENT 1
LED SENT blinkt: Es werden Daten über das SENT Protokoll übertragen.
LED ECU leuchtet: Es wird eine ECU simuliert.

PSI5/SENT 2
LED SENT blinkt: Es werden Daten über das SENT Protokoll übertragen.
LED Sens. leuchtet: Es wird ein Sensor simuliert.

Fehlermeldungen

Fehler 1
System	Sensor: No matching hardware interface was found for sensor channel "ECUSIM".
System	Sensor: No matching hardware interface was found for sensor channel "SENSORSIM".

Bedeutung Fehler 1
Dieser Fehler erscheint, wenn das VT-System nicht aktiviert ist. Aktivieren Sie das VT-System unter CANoe Options -> Extensions -> VT System -> VT System enabled und überprüfen Sie den eingestellten Netzwerkadapter.

Fehler 2
System	VT System: No modules found!
System	VT System: Error occurred while starting measurement
System	VT System: --> Please connect more slaves or remove modules.
System	VT System: --> Too few connected slave for the number of loaded modules.

Bedeutung Fehler 2
Dieser Fehler erscheint, wenn das VT Sytem nicht erreicht werden kann. Überprüfen Sie die Netzwerkverbindung und den eingestellten Netzwerkadapter.

Fehler 3
Die Messung wird fehlerfrei gestartet, aber es wird kein Signal im Fenster "Grafik" dargestellt. Im Fenster "Trace" erscheint die folgende Meldung:
ECUSIM    SV:   SensorError   Rx    ErrorCode   Frame missing  Frame missing         

Bedeutung Fehler 3
Es können keine Daten von der ECU empfangen werden. Überprüfen Sie, ob die Signalleitugnen wie unter "Einrichten der Hardware" beschrieben verbunden sind.

Beschreibung des CAPL Programms
Durch die Definition des Signals "RollingCounter" für den simulierten Sensor wird eine Systemvariable RollingCounter_Stim angelegt. Dieser Systemvariablen können mit dem CAPL-Befehl QueueValues() Daten übergeben, die dann mit dem SENT Protokoll übertragen werden. Dabei wird kein Einzelwert, sondern ein Array mit Werten übergeben. Der Datenpuffer der Systemvariablen RollingCounter_Stim wird beim Starten des Programmes mit Daten gefüllt. Ein Timer wird zyklisch aufgerufen und füllt den Datenspeicher der Systemvariablen wieder nach. Dadurch ist der Datenspeicher der Systemvariablen immer mit Daten gefüllt und die Daten werden kontinuierlich übertragen.